function reflectProfileImage(e,n){"ext_and_mimetype"===n?$("#uploaded_image").append("<span id='upload_image_preview'>画像のアップロードに失敗しました。</span>"):"file_size"===n?$("#uploaded_image").append("<span id='upload_image_preview'>20MB以下の画像を指定して下さい。</span>"):$(e).siblings("img").attr("src","/uploads/profile/"+n)}$(function(){$("#notification_header").length>0&&$("#notification_header").animate_notification()}),$.fn.animate_notification=function(){$("#notification_header").css({top:"0px"}).fadeIn(1e3).delay(2e3).fadeOut(2e3)},$(function(){$("input[id^=upload_profile_image]").length>0&&$("input[id^=upload_profile_image]").previewProfileImage()}),$.fn.previewProfileImage=function(){$(this).on("change",function(){var e=$(this),n=e.parent("form"),a=new FormData(n[0]),i=$("#csrf_token").val();$.ajax({url:"/mypage/profile/upload_profile_image",method:"post",headers:{"X-CSRF-TOKEN":i},data:a,processData:!1,contentType:!1}).done(function(n){console.log(n),reflectProfileImage(e,$.parseJSON(n))})})},$(function(){$("p[name^=word_count_]").length>0&&$("p[name^=word_count_]").count_word()}),$.fn.count_word=function(){$(this).each(function(){var e=$(this),n="#"+e.data("target"),a=$(n).val().length||0;display_word_counter(e,a),$(n).bind("keydown keyup change",function(){a=$(n).val().length,display_word_counter(e,a)})})};var display_word_counter=function(e,n){var a=e.data("limit");a<n?e.empty().append("<span style='color:#FF0000;'>"+n+"</span>/<span>"+a+"</span>文字</span>"):e.empty().append("<span>"+n+"</span>/<span>"+a+"文字</span>")};